<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…ƒå®å¯¼èˆª | ç°ä»£é£æ ¼å¯¼èˆªç«™</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #0066ff;
            --primary-dark: #0052d4;
            --background-color: rgba(255, 255, 255, 0.85);
            --card-color: #ffffff;
            --text-primary: #1a1a1a;
            --text-secondary: #666;
            --border-color: #e6e6e6;
            --shadow: 0 8px 30px rgba(0, 102, 255, 0.12);
            --radius: 16px;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'PingFang SC', 'Microsoft YaHei', sans-serif;
        }
        body {
            background: var(--card-color);
            color: var(--text-primary);
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }
        #background-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: -2;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        #dynamic-bg {
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0.6;
        }
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.92);
            z-index: -1;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        header {
            text-align: center;
            padding: 30px 20px;
            margin-bottom: 30px;
        }
        header h1 {
            font-size: 2.8rem;
            background: linear-gradient(90deg, var(--primary-color), #764ba2);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 10px;
        }
        header p {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }
        .dashboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }
        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
        }
        .info-card {
            background: var(--background-color);
            backdrop-filter: blur(10px);
            border-radius: var(--radius);
            padding: 25px;
            box-shadow: var(--shadow);
            border: 1px solid rgba(255, 255, 255, 0.8);
        }
        .info-card h2 {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.4rem;
            margin-bottom: 20px;
            color: var(--primary-dark);
        }
        .time-weather {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        #current-time {
            font-size: 2.8rem;
            font-weight: 700;
            color: var(--primary-color);
            line-height: 1;
        }
        #current-date {
            font-size: 1.2rem;
            color: var(--text-secondary);
        }
        .weather-info {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 10px;
        }
        .temp {
            font-size: 2.5rem;
            font-weight: 700;
        }
        .weather-details {
            text-align: right;
        }
        .category-nav {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            justify-content: center;
            margin-bottom: 40px;
            padding: 0 10px;
        }
        .cat-btn {
            padding: 12px 24px;
            background: var(--background-color);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-color);
            border-radius: 50px;
            font-weight: 600;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .cat-btn:hover, .cat-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 102, 255, 0.2);
        }
        .bookmarks-section {
            margin-bottom: 50px;
        }
        .section-title {
            font-size: 1.8rem;
            margin-bottom: 25px;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .bookmarks-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }
        .bookmark-card {
            background: var(--background-color);
            backdrop-filter: blur(10px);
            border-radius: var(--radius);
            padding: 22px;
            border: 1px solid rgba(255, 255, 255, 0.8);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            text-decoration: none;
            color: inherit;
            display: block;
        }
        .bookmark-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow);
            border-color: var(--primary-color);
        }
        .bookmark-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
            font-size: 1.5rem;
            color: white;
        }
        .bookmark-card h3 {
            font-size: 1.2rem;
            margin-bottom: 8px;
            color: var(--text-primary);
        }
        .bookmark-card p {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.5;
        }
        #back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--primary-color);
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            box-shadow: 0 4px 15px rgba(0, 102, 255, 0.3);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 1000;
        }
        #back-to-top.show {
            opacity: 1;
            visibility: visible;
        }
        #back-to-top:hover {
            background: var(--primary-dark);
            transform: scale(1.1);
        }
        footer {
            text-align: center;
            padding: 30px 20px;
            color: var(--text-secondary);
            border-top: 1px solid var(--border-color);
            margin-top: 40px;
        }
        .config-note {
            background: #f8f9ff;
            border-radius: var(--radius);
            padding: 20px;
            margin-top: 30px;
            border-left: 4px solid var(--primary-color);
        }
        .config-note h3 {
            color: var(--primary-dark);
            margin-bottom: 10px;
        }
        .city-selector {
            margin-top: 15px;
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }
        .city-selector select, .city-selector button {
            padding: 8px 12px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            background: white;
        }
        .city-selector button {
            background: var(--primary-color);
            color: white;
            border: none;
            cursor: pointer;
            font-weight: 500;
        }
        .city-selector button:hover {
            background: var(--primary-dark);
        }
        .loading {
            opacity: 0.7;
        }
        .weather-icon {
            font-size: 1.2rem;
            margin-right: 5px;
        }
    </style>
</head>
<body>
    <!-- èƒŒæ™¯å®¹å™¨ï¼Œå›¾ç‰‡å°†ä»ä»“åº“åŠ è½½ -->
    <div id="background-container">
        <!-- èƒŒæ™¯å›¾ç‰‡å°†é€šè¿‡JSåŠ¨æ€è®¾ç½® -->
        <img id="dynamic-bg" src="" alt="èƒŒæ™¯å›¾">
    </div>
    <div class="overlay"></div>

    <div class="container">
        <header>
            <h1><i class="fas fa-compass"></i> å…ƒå®å¯¼èˆª</h1>
            <p>ç®€æ´é«˜æ•ˆ Â· ä¸ªæ€§å®šåˆ¶ Â· ä¸€ç«™ç›´è¾¾</p>
        </header>

        <div class="dashboard">
            <div class="info-card">
                <h2><i class="far fa-clock"></i> æ—¶é—´ä¸æ—¥æœŸ</h2>
                <div class="time-weather">
                    <div id="current-time">00:00:00</div>
                    <div id="current-date">2024å¹´1æœˆ1æ—¥ æ˜ŸæœŸä¸€</div>
                </div>
            </div>
            <div class="info-card">
                <h2><i class="fas fa-cloud-sun"></i> å¤©æ°”ä¿¡æ¯</h2>
                <div class="weather-info">
                    <div>
                        <div class="temp" id="temperature">-- Â°C</div>
                        <div id="weather-desc">æ­£åœ¨è·å–å¤©æ°”...</div>
                    </div>
                    <div class="weather-details">
                        <div id="location">--</div>
                        <div>æ¹¿åº¦: <span id="humidity">--%</span></div>
                        <div>é£é€Ÿ: <span id="wind">-- km/h</span></div>
                    </div>
                </div>
                <div class="city-selector">
                    <select id="city-select">
                        <option value="auto">è‡ªåŠ¨å®šä½ (IP)</option>
                        <option value="39.9042,116.4074">åŒ—äº¬</option>
                        <option value="31.2304,121.4737">ä¸Šæµ·</option>
                        <option value="23.1291,113.2644">å¹¿å·</option>
                        <option value="22.5431,114.0579">æ·±åœ³</option>
                        <option value="30.5728,104.0668">æˆéƒ½</option>
                        <option value="22.8167,108.3833">å—å®</option>
                    </select>
                    <button id="refresh-weather"><i class="fas fa-sync-alt"></i> åˆ·æ–°</button>
                </div>
            </div>
        </div>

        <!-- åˆ†ç±»å¯¼èˆª -->
        <div class="category-nav" id="categoryNav">
            <!-- åˆ†ç±»æŒ‰é’®å°†ç”±JSåŠ¨æ€ç”Ÿæˆ -->
        </div>

        <!-- ä¹¦ç­¾å†…å®¹åŒºåŸŸ -->
        <div id="bookmarksContainer">
            <!-- å„åˆ†ç±»ä¹¦ç­¾å°†ç”±JSåŠ¨æ€ç”Ÿæˆ -->
        </div>

        <!-- å›åˆ°é¡¶éƒ¨æŒ‰é’® -->
        <button id="back-to-top" title="å›åˆ°é¡¶éƒ¨">
            <i class="fas fa-chevron-up"></i>
        </button>

        <div class="config-note">
            <h3><i class="fas fa-cog"></i> é…ç½®è¯´æ˜</h3>
            <p><strong>1. èƒŒæ™¯å›¾ç‰‡</strong>ï¼šä¿®æ”¹ä¸‹æ–¹ä»£ç ä¸­ `backgroundImageUrl` å˜é‡ä¸ºæ‚¨çš„GitHubä»“åº“å›¾ç‰‡Rawé“¾æ¥ã€‚</p>
            <p><strong>2. å¤©æ°”æ¥å£</strong>ï¼šæœ¬ç½‘ç«™ä½¿ç”¨ <strong>Open-Meteo</strong> å…è´¹å¤©æ°”APIï¼Œæ— éœ€æ³¨å†Œï¼Œå¼€ç®±å³ç”¨ã€‚é»˜è®¤é€šè¿‡IPè‡ªåŠ¨å®šä½ï¼Œä¹Ÿå¯æ‰‹åŠ¨é€‰æ‹©åŸå¸‚ã€‚</p>
            <p><strong>3. ä¹¦ç­¾ç®¡ç†</strong>ï¼šä¿®æ”¹ä¸‹æ–¹ `bookmarkData` æ•°ç»„ï¼Œæ·»åŠ æˆ–åˆ é™¤æ‚¨çš„ä¹¦ç­¾ã€‚</p>
            <p><strong>4. éƒ¨ç½²</strong>ï¼šå°†æ­¤HTMLæ–‡ä»¶ä¸Šä¼ è‡³GitHubä»“åº“ï¼Œåœ¨Cloudflare Pagesä¸­è¿æ¥ä»“åº“å¹¶éƒ¨ç½²ã€‚</p>
        </div>

        <footer>
            <p>Â© 2024 å…ƒå®å¯¼èˆª | åŸºäº Cloudflare Pages éƒ¨ç½² | å¤©æ°”æœåŠ¡ç”± Open-Meteo æä¾›</p>
        </footer>
    </div>

    <script>
        // ============ é…ç½®éƒ¨åˆ† (å¼€å§‹) ============
        // 1. èƒŒæ™¯å›¾ç‰‡ (æ›¿æ¢ä¸ºæ‚¨çš„GitHubä»“åº“å›¾ç‰‡Rawé“¾æ¥)
        const backgroundImageUrl = 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80'; // ç¤ºä¾‹èƒŒæ™¯å›¾ï¼Œå¯æ›¿æ¢
        
        // 2. ä¹¦ç­¾æ•°æ® (æŒ‰éœ€ä¿®æ”¹)
        const bookmarkData = [
            {
                category: 'work',
                name: 'å·¥ä½œå¿…å¤‡',
                icon: 'fas fa-briefcase',
                color: '#0066ff',
                items: [
                    { name: 'è…¾è®¯äº‘', url: 'https://cloud.tencent.com/', desc: 'è…¾è®¯äº‘å®˜æ–¹é¦–é¡µ', icon: 'fas fa-cloud' },
                    { name: 'GitHub', url: 'https://github.com/', desc: 'å…¨çƒå¼€å‘è€…ç¤¾åŒº', icon: 'fab fa-github' },
                    { name: 'Notion', url: 'https://www.notion.so/', desc: 'ä¸€ä½“åŒ–å·¥ä½œç©ºé—´', icon: 'fas fa-sticky-note' },
                    { name: 'Figma', url: 'https://www.figma.com/', desc: 'åœ¨çº¿è®¾è®¡åä½œå·¥å…·', icon: 'fab fa-figma' },
                    { name: 'Zoom', url: 'https://zoom.us/', desc: 'è§†é¢‘ä¼šè®®å¹³å°', icon: 'fas fa-video' },
                    { name: 'Slack', url: 'https://slack.com/', desc: 'å›¢é˜Ÿåä½œå·¥å…·', icon: 'fab fa-slack' },
                    { name: 'Cloudflare', url: 'https://www.cloudflare.com/', desc: 'CDNå’Œå®‰å…¨æœåŠ¡', icon: 'fas fa-shield-alt' },
                    { name: 'Vercel', url: 'https://vercel.com/', desc: 'å‰ç«¯éƒ¨ç½²å¹³å°', icon: 'fas fa-rocket' },
                    { name: 'ClawCloud Run', url: 'https://claw.run/', desc: 'çŒ«çˆªäº‘å‡½æ•°å¹³å°', icon: 'fas fa-paw' }
                ]
            },
            {
                category: 'ai',
                name: 'AIå·¥å…·',
                icon: 'fas fa-robot',
                color: '#9c27b0',
                items: [
                    { name: 'å…ƒå® AI', url: 'https://yuanbao.tencent.com/', desc: 'è…¾è®¯AIåŠ©æ‰‹', icon: 'fas fa-gem' },
                    { name: 'è±†åŒ…', url: 'https://www.doubao.com/', desc: 'å­—èŠ‚è·³åŠ¨AIåŠ©æ‰‹', icon: 'fas fa-seedling' },
                    { name: 'é€šä¹‰åƒé—®', url: 'https://tongyi.aliyun.com/', desc: 'é˜¿é‡Œäº‘AIå¤§æ¨¡å‹', icon: 'fas fa-brain' },
                    { name: 'DeepSeek', url: 'https://www.deepseek.com/', desc: 'æ·±åº¦æ±‚ç´¢AI', icon: 'fas fa-search' },
                    { name: 'OpenAI', url: 'https://openai.com/', desc: 'ChatGPTåˆ›é€ è€…', icon: 'fas fa-brain' },
                    { name: 'Claude', url: 'https://claude.ai/', desc: 'Anthropic AIåŠ©æ‰‹', icon: 'fas fa-comment' }
                ]
            },
            {
                category: 'dev',
                name: 'æŠ€æœ¯å¼€å‘',
                icon: 'fas fa-code',
                color: '#00a86b',
                items: [
                    { name: 'MDN Web Docs', url: 'https://developer.mozilla.org/', desc: 'WebæŠ€æœ¯æ–‡æ¡£', icon: 'fab fa-mdn' },
                    { name: 'Stack Overflow', url: 'https://stackoverflow.com/', desc: 'ç¨‹åºå‘˜é—®ç­”ç¤¾åŒº', icon: 'fab fa-stack-overflow' },
                    { name: 'Vue.js', url: 'https://vuejs.org/', desc: 'æ¸è¿›å¼JavaScriptæ¡†æ¶', icon: 'fab fa-vuejs' },
                    { name: 'React', url: 'https://reactjs.org/', desc: 'Facebookå‰ç«¯æ¡†æ¶', icon: 'fab fa-react' },
                    { name: 'npm', url: 'https://www.npmjs.com/', desc: 'Node.jsåŒ…ç®¡ç†å™¨', icon: 'fab fa-npm' },
                    { name: 'Docker Hub', url: 'https://hub.docker.com/', desc: 'Dockeré•œåƒä»“åº“', icon: 'fab fa-docker' }
                ]
            },
            {
                category: 'design',
                name: 'è®¾è®¡èµ„æº',
                icon: 'fas fa-palette',
                color: '#ff6b6b',
                items: [
                    { name: 'Dribbble', url: 'https://dribbble.com/', desc: 'è®¾è®¡å¸ˆä½œå“å±•ç¤º', icon: 'fab fa-dribbble' },
                    { name: 'Behance', url: 'https://www.behance.net/', desc: 'åˆ›æ„ä½œå“é›†å¹³å°', icon: 'fab fa-behance' },
                    { name: 'Unsplash', url: 'https://unsplash.com/', desc: 'å…è´¹é«˜æ¸…å›¾ç‰‡åº“', icon: 'fas fa-camera' },
                    { name: 'Font Awesome', url: 'https://fontawesome.com/', desc: 'å›¾æ ‡åº“ä¸å·¥å…·åŒ…', icon: 'fas fa-font-awesome' },
                    { name: 'Coolors', url: 'https://coolors.co/', desc: 'é…è‰²æ–¹æ¡ˆç”Ÿæˆå™¨', icon: 'fas fa-fill-drip' },
                    { name: 'Canva', url: 'https://www.canva.com/', desc: 'åœ¨çº¿è®¾è®¡å¹³å°', icon: 'fas fa-paint-brush' }
                ]
            },
            {
                category: 'news',
                name: 'èµ„è®¯åª’ä½“',
                icon: 'fas fa-newspaper',
                color: '#ff9800',
                items: [
                    { name: 'Product Hunt', url: 'https://www.producthunt.com/', desc: 'å‘ç°æ–°äº§å“', icon: 'fas fa-rocket' },
                    { name: 'Hacker News', url: 'https://news.ycombinator.com/', desc: 'æŠ€æœ¯æ–°é—»èšåˆ', icon: 'fab fa-hacker-news' },
                    { name: 'å°‘æ•°æ´¾', url: 'https://sspai.com/', desc: 'é«˜æ•ˆå·¥ä½œä¸ç”Ÿæ´»æ–¹å¼', icon: 'fas fa-pen-fancy' },
                    { name: 'InfoQ', url: 'https://www.infoq.com/', desc: 'è½¯ä»¶å¼€å‘æŠ€æœ¯æ–°é—»', icon: 'fas fa-chart-line' },
                    { name: 'TechCrunch', url: 'https://techcrunch.com/', desc: 'ç§‘æŠ€æ–°é—»ä¸è¯„è®º', icon: 'fas fa-bolt' },
                    { name: 'The Verge', url: 'https://www.theverge.com/', desc: 'ç§‘æŠ€ã€ç§‘å­¦ä¸æ–‡åŒ–', icon: 'fas fa-edge' }
                ]
            }
        ];
        // ============ é…ç½®éƒ¨åˆ† (ç»“æŸ) ============

        // DOM å…ƒç´ 
        const currentTimeEl = document.getElementById('current-time');
        const currentDateEl = document.getElementById('current-date');
        const categoryNavEl = document.getElementById('categoryNav');
        const bookmarksContainerEl = document.getElementById('bookmarksContainer');
        const backToTopBtn = document.getElementById('back-to-top');
        const bgImageEl = document.getElementById('dynamic-bg');
        const tempEl = document.getElementById('temperature');
        const weatherDescEl = document.getElementById('weather-desc');
        const locationEl = document.getElementById('location');
        const humidityEl = document.getElementById('humidity');
        const windEl = document.getElementById('wind');
        const citySelectEl = document.getElementById('city-select');
        const refreshWeatherBtn = document.getElementById('refresh-weather');

        // å¤©æ°”å›¾æ ‡æ˜ å°„
        const weatherIcons = {
            'æ™´': 'â˜€ï¸',
            'å¤šäº‘': 'â›…',
            'é˜´': 'â˜ï¸',
            'å°é›¨': 'ğŸŒ¦ï¸',
            'ä¸­é›¨': 'ğŸŒ§ï¸',
            'å¤§é›¨': 'â›ˆï¸',
            'é›ª': 'â„ï¸',
            'é›¾': 'ğŸŒ«ï¸',
            'é›·é˜µé›¨': 'â›ˆï¸',
            'default': 'ğŸŒ¤ï¸'
        };

        // 1. è®¾ç½®èƒŒæ™¯å›¾ç‰‡
        if (backgroundImageUrl) {
            bgImageEl.src = backgroundImageUrl;
            bgImageEl.onerror = function() {
                console.warn('èƒŒæ™¯å›¾ç‰‡åŠ è½½å¤±è´¥ï¼Œå°†ä½¿ç”¨é»˜è®¤æ¸å˜èƒŒæ™¯ã€‚è¯·æ£€æŸ¥ backgroundImageUrl å˜é‡ã€‚');
                this.style.display = 'none';
            };
        } else {
            bgImageEl.style.display = 'none';
        }

        // 2. æ—¶é—´æ—¥æœŸåŠŸèƒ½
        function updateTime() {
            const now = new Date();
            const timeStr = now.toLocaleTimeString('zh-CN');
            const dateStr = now.toLocaleDateString('zh-CN', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            currentTimeEl.textContent = timeStr;
            currentDateEl.textContent = dateStr;
        }
        
        // ç«‹å³æ›´æ–°æ—¶é—´ï¼Œç„¶åæ¯ç§’æ›´æ–°
        updateTime();
        setInterval(updateTime, 1000);

        // 3. å¤©æ°”åŠŸèƒ½
        let currentCoords = null;
        let currentCityName = 'è‡ªåŠ¨å®šä½';

        // é€šè¿‡IPè·å–ä½ç½®
        async function getLocationByIP() {
            try {
                const response = await fetch('https://ipapi.co/json/');
                const data = await response.json();
                if (data && data.latitude && data.longitude) {
                    return {
                        latitude: data.latitude,
                        longitude: data.longitude,
                        city: data.city || 'æœªçŸ¥ä½ç½®'
                    };
                }
            } catch (error) {
                console.warn('IPå®šä½å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤ä½ç½®:', error);
            }
            // é»˜è®¤è¿”å›åŒ—äº¬ä½ç½®
            return {
                latitude: 39.9042,
                longitude: 116.4074,
                city: 'åŒ—äº¬'
            };
        }

        // è·å–å¤©æ°”æ•°æ®
        async function fetchWeather(coords = null, cityName = '') {
            let latitude, longitude;
            
            if (!coords) {
                // è‡ªåŠ¨è·å–ä½ç½®
                const locationData = await getLocationByIP();
                latitude = locationData.latitude;
                longitude = locationData.longitude;
                currentCityName = locationData.city;
            } else {
                latitude = coords.latitude;
                longitude = coords.longitude;
                currentCityName = cityName || 'å·²é€‰ä½ç½®';
            }
            
            // æ›´æ–°æ˜¾ç¤º
            locationEl.textContent = currentCityName;
            weatherDescEl.textContent = 'è·å–ä¸­...';
            tempEl.textContent = '-- Â°C';
            humidityEl.textContent = '--%';
            windEl.textContent = '-- km/h';
            
            try {
                // ä½¿ç”¨Open-Meteoå…è´¹API
                const weatherUrl = `https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&current=temperature_2m,relative_humidity_2m,wind_speed_10m,weather_code&timezone=auto`;
                
                const response = await fetch(weatherUrl);
                const data = await response.json();
                
                if (data && data.current) {
                    const current = data.current;
                    
                    // æ¸©åº¦
                    tempEl.textContent = `${Math.round(current.temperature_2m)}Â°C`;
                    
                    // å¤©æ°”æè¿°
                    const weatherCode = current.weather_code;
                    const weatherDesc = getWeatherDescription(weatherCode);
                    weatherDescEl.innerHTML = `<span class="weather-icon">${getWeatherIcon(weatherDesc)}</span> ${weatherDesc}`;
                    
                    // æ¹¿åº¦
                    humidityEl.textContent = `${current.relative_humidity_2m}%`;
                    
                    // é£é€Ÿ (è½¬ä¸ºkm/h)
                    const windSpeedKmh = Math.round(current.wind_speed_10m * 3.6);
                    windEl.textContent = `${windSpeedKmh} km/h`;
                    
                    // æ›´æ–°å½“å‰åæ ‡
                    currentCoords = { latitude, longitude };
                } else {
                    throw new Error('å¤©æ°”æ•°æ®æ ¼å¼é”™è¯¯');
                }
            } catch (error) {
                console.error('è·å–å¤©æ°”å¤±è´¥:', error);
                weatherDescEl.textContent = 'è·å–å¤±è´¥';
                tempEl.textContent = '-- Â°C';
                humidityEl.textContent = '--%';
                windEl.textContent = '-- km/h';
                
                // å¦‚æœå¤±è´¥ï¼Œæ˜¾ç¤ºé»˜è®¤æ•°æ®
                if (!coords) {
                    locationEl.textContent = 'åŒ—äº¬';
                    fetchWeather({ latitude: 39.9042, longitude: 116.4074 }, 'åŒ—äº¬');
                }
            }
        }

        // æ ¹æ®å¤©æ°”ä»£ç è·å–æè¿°
        function getWeatherDescription(code) {
            const weatherMap = {
                0: 'æ™´',
                1: 'å¤§éƒ¨åˆ†æ™´',
                2: 'éƒ¨åˆ†å¤šäº‘',
                3: 'å¤šäº‘',
                45: 'é›¾',
                48: 'å†»é›¾',
                51: 'å°é›¨',
                53: 'ä¸­é›¨',
                55: 'å¤§é›¨',
                56: 'å†»é›¨',
                57: 'å¼ºå†»é›¨',
                61: 'å°é›¨',
                63: 'ä¸­é›¨',
                65: 'å¤§é›¨',
                66: 'å†»é›¨',
                67: 'å¼ºå†»é›¨',
                71: 'å°é›ª',
                73: 'ä¸­é›ª',
                75: 'å¤§é›ª',
                77: 'å†°é›¹',
                80: 'é˜µé›¨',
                81: 'å¼ºé˜µé›¨',
                82: 'æš´é›¨',
                85: 'é˜µé›ª',
                86: 'å¼ºé˜µé›ª',
                95: 'é›·æš´',
                96: 'é›·æš´ä¼´æœ‰å†°é›¹',
                99: 'å¼ºé›·æš´ä¼´æœ‰å†°é›¹'
            };
            return weatherMap[code] || 'æœªçŸ¥';
        }

        // è·å–å¤©æ°”å›¾æ ‡
        function getWeatherIcon(desc) {
            if (desc.includes('æ™´')) return 'â˜€ï¸';
            if (desc.includes('äº‘')) return 'â›…';
            if (desc.includes('é˜´')) return 'â˜ï¸';
            if (desc.includes('é›¨')) return 'ğŸŒ§ï¸';
            if (desc.includes('é›ª')) return 'â„ï¸';
            if (desc.includes('é›¾')) return 'ğŸŒ«ï¸';
            if (desc.includes('é›·')) return 'â›ˆï¸';
            return 'ğŸŒ¤ï¸';
        }

        // 4. ä¹¦ç­¾åˆ†ç±»ä¸æ¸²æŸ“
        function renderCategoryNav() {
            categoryNavEl.innerHTML = '';
            // æ·»åŠ "å…¨éƒ¨"æŒ‰é’®
            const allButton = document.createElement('button');
            allButton.className = 'cat-btn active';
            allButton.innerHTML = '<i class="fas fa-th-large"></i> å…¨éƒ¨';
            allButton.dataset.category = 'all';
            allButton.addEventListener('click', () => filterBookmarks('all'));
            categoryNavEl.appendChild(allButton);
            
            // æ·»åŠ å„åˆ†ç±»æŒ‰é’®
            bookmarkData.forEach(cat => {
                const button = document.createElement('button');
                button.className = 'cat-btn';
                button.innerHTML = `<i class="${cat.icon}"></i> ${cat.name}`;
                button.dataset.category = cat.category;
                button.addEventListener('click', () => filterBookmarks(cat.category));
                categoryNavEl.appendChild(button);
            });
        }

        function renderAllBookmarks() {
            bookmarksContainerEl.innerHTML = '';
            bookmarkData.forEach(cat => {
                const section = document.createElement('section');
                section.className = 'bookmarks-section';
                section.id = `cat-${cat.category}`;
                section.innerHTML = `
                    <h2 class="section-title">
                        <i class="${cat.icon}" style="color: ${cat.color};"></i>
                        ${cat.name}
                    </h2>
                    <div class="bookmarks-grid" id="grid-${cat.category}">
                        <!-- ä¹¦ç­¾å¡ç‰‡å°†ç”±JSåŠ¨æ€æ·»åŠ  -->
                    </div>
                `;
                bookmarksContainerEl.appendChild(section);
                const grid = document.getElementById(`grid-${cat.category}`);
                cat.items.forEach(item => {
                    const card = document.createElement('a');
                    card.className = 'bookmark-card';
                    card.href = item.url;
                    card.target = '_blank';
                    card.rel = 'noopener noreferrer';
                    card.innerHTML = `
                        <div class="bookmark-icon" style="background: ${cat.color};">
                            <i class="${item.icon}"></i>
                        </div>
                        <h3>${item.name}</h3>
                        <p>${item.desc}</p>
                    `;
                    grid.appendChild(card);
                });
            });
        }

        function filterBookmarks(category) {
            // æ›´æ–°æŒ‰é’®æ¿€æ´»çŠ¶æ€
            document.querySelectorAll('.cat-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.category === category) {
                    btn.classList.add('active');
                }
            });
            
            // æ˜¾ç¤º/éšè—åˆ†ç±»
            document.querySelectorAll('.bookmarks-section').forEach(section => {
                if (category === 'all' || section.id === `cat-${category}`) {
                    section.style.display = 'block';
                } else {
                    section.style.display = 'none';
                }
            });
            
            // æ»šåŠ¨åˆ°é¡¶éƒ¨ï¼ˆåˆ†ç±»å¯¼èˆªä½ç½®ï¼‰
            window.scrollTo({
                top: categoryNavEl.offsetTop - 20,
                behavior: 'smooth'
            });
        }

        // 5. å›åˆ°é¡¶éƒ¨åŠŸèƒ½
        window.addEventListener('scroll', () => {
            if (window.scrollY > 300) {
                backToTopBtn.classList.add('show');
            } else {
                backToTopBtn.classList.remove('show');
            }
        });
        
        backToTopBtn.addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });

        // 6. åŸå¸‚é€‰æ‹©å™¨äº‹ä»¶ç›‘å¬
        citySelectEl.addEventListener('change', function() {
            if (this.value === 'auto') {
                // è‡ªåŠ¨å®šä½
                fetchWeather();
            } else {
                // æ‰‹åŠ¨é€‰æ‹©åŸå¸‚
                const [lat, lon] = this.value.split(',').map(Number);
                const cityName = this.options[this.selectedIndex].text;
                fetchWeather({ latitude: lat, longitude: lon }, cityName);
            }
        });

        // 7. åˆ·æ–°å¤©æ°”æŒ‰é’®äº‹ä»¶
        refreshWeatherBtn.addEventListener('click', function() {
            this.classList.add('loading');
            this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> åˆ·æ–°ä¸­';
            
            if (citySelectEl.value === 'auto') {
                fetchWeather().finally(() => {
                    this.classList.remove('loading');
                    this.innerHTML = '<i class="fas fa-sync-alt"></i> åˆ·æ–°';
                });
            } else {
                const [lat, lon] = citySelectEl.value.split(',').map(Number);
                const cityName = citySelectEl.options[citySelectEl.selectedIndex].text;
                fetchWeather({ latitude: lat, longitude: lon }, cityName).finally(() => {
                    this.classList.remove('loading');
                    this.innerHTML = '<i class="fas fa-sync-alt"></i> åˆ·æ–°';
                });
            }
        });

        // 8. åˆå§‹åŒ–é¡µé¢
        function init() {
            // è®¾ç½®èƒŒæ™¯
            if (backgroundImageUrl) {
                bgImageEl.src = backgroundImageUrl;
            }
            
            // åˆå§‹åŒ–æ—¶é—´
            updateTime();
            
            // åˆå§‹åŒ–å¤©æ°”ï¼ˆä½¿ç”¨IPè‡ªåŠ¨å®šä½ï¼‰
            fetchWeather();
            
            // æ¸²æŸ“ä¹¦ç­¾åˆ†ç±»å’Œå†…å®¹
            renderCategoryNav();
            renderAllBookmarks();
            
            // é»˜è®¤æ˜¾ç¤ºå…¨éƒ¨ä¹¦ç­¾
            filterBookmarks('all');
            
            // æ¯30åˆ†é’Ÿæ›´æ–°ä¸€æ¬¡å¤©æ°”
            setInterval(() => {
                if (citySelectEl.value === 'auto') {
                    fetchWeather();
                } else {
                    const [lat, lon] = citySelectEl.value.split(',').map(Number);
                    const cityName = citySelectEl.options[citySelectEl.selectedIndex].text;
                    fetchWeather({ latitude: lat, longitude: lon }, cityName);
                }
            }, 30 * 60 * 1000);
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>



